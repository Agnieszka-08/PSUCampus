import{r as a,a as d,j as t}from"./app-Bj35u0aw.js";import{H as N}from"./HMO-C3qAJvSt.js";import"./ApplicationLogo-D7b-nK0J.js";import"./Dropdown-BCcZKrPf.js";import"./transition-BNsY7gge.js";import"./NavLink-BPFgOv7A.js";function D(){const[l,o]=a.useState([]),[n,i]=a.useState(null),[m,u]=a.useState(!1),[r,c]=a.useState({announcement:""});a.useEffect(()=>{d.get("/announcements/json").then(e=>o(e.data.announcements||[])).catch(e=>console.error("Failed to fetch services",e))},[]);const h=e=>{c({...r,[e.target.name]:e.target.value})},g=async()=>{const e=await d.post("/announcements",r);o([e.data,...l])},p=async()=>{const e=await d.post(`/announcements/${n}`,{...r,_method:"PUT"});o(s=>s.map(x=>x.id===n?e.data:x))},b=async e=>{e.preventDefault(),u(!0);try{n?await p():await g(),c({announcement:""}),i(null)}catch{alert("Something went wrong")}finally{u(!1)}},f=e=>{c({announcement:e.announcement}),i(e.id)},y=async e=>{if(confirm("Delete this announcement?"))try{await d.delete(`/announcements/${e}`),o(l.filter(s=>s.id!==e))}catch{alert("Failed to delete.")}},j=()=>{i(null),c({announcement:""})};return t.jsx(N,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h1",{className:"text-3xl font-semibold text-gray-800 text-center mb-10",children:"ðŸ›  School Announcement"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:n?"Edit Announcement":"Add New Announcement"}),t.jsxs("form",{onSubmit:b,className:"space-y-4",children:[t.jsx("input",{type:"text",placeholder:"Enter announcement",name:"announcement",value:r.announcement,onChange:h,required:!0,className:"w-full bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"submit",disabled:m,className:"bg-blue-600 text-white px-6 py-2 rounded-xl text-sm font-medium shadow-sm disabled:opacity-50",children:m?"Saving...":n?"Update":"Add"}),n&&t.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-xl text-sm font-medium shadow-sm",onClick:j,children:"Cancel"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 border border-gray-200",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Existing Announcement"}),t.jsx("div",{className:"space-y-3",children:l.map(e=>t.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl flex items-center justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:e.announcement}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>f(e),className:"text-blue-600 font-medium text-sm",children:"Edit"}),t.jsx("button",{onClick:()=>y(e.id),className:"text-red-600 font-medium text-sm",children:"Delete"})]})]},e.id))})]})]})]})})}export{D as default};
