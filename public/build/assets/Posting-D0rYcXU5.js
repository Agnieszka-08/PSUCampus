import{r as s,a as d,j as t,H as N}from"./app-ByUjxpQE.js";import{A as v}from"./Admin-DTfWONyw.js";import"./ApplicationLogo-Dnd1g8D1.js";import"./Dropdown-B3JH11HD.js";import"./transition-onB7Nb7C.js";import"./NavLink-CXfcPPhR.js";function k(){const[i,r]=s.useState([]),[D,S]=s.useState({picture:null,video:null}),[o,m]=s.useState(null),[c,u]=s.useState(!1),[n,l]=s.useState({name:"",information:""});s.useEffect(()=>{d.get("/information/json").then(e=>{r(e.data.post||[])}).catch(e=>{console.error("Failed to fetch posts",e)})},[]);const x=e=>{l({...n,[e.target.name]:e.target.value})},p=async()=>{const e=new FormData;e.append("name",n.name),e.append("information",n.information);const a=await d.post("/info-buildings",e);r([a.data,...i])},h=async()=>{const e=new FormData;e.append("_method","PUT"),e.append("name",n.name),e.append("information",n.information);const a=await d.post(`/info-buildings/${o}`,e);r(j=>j.map(f=>f.id===o?a.data:f))},g=async e=>{e.preventDefault(),u(!0);try{o?await h():await p(),l({name:"",information:""}),m(null)}catch(a){console.error("Failed to submit form",a),alert("Something went wrong.")}finally{u(!1)}},b=e=>{l({name:e.name,information:e.information}),m(e.id)},y=async e=>{if(confirm("Are you sure you want to delete this post?"))try{await d.delete(`/info-buildings/${e}`),r(i.filter(a=>a.id!==e))}catch(a){console.error("Delete failed",a),alert("Failed to delete post")}},w=()=>{m(null),l({name:"",information:""})};return t.jsxs(v,{children:[t.jsx(N,{title:"Dashboard"}),t.jsx("div",{className:"py-12 bg-gray-50 min-h-screen",children:t.jsxs("div",{className:"mx-auto max-w-6xl px-4 flex flex-col md:flex-row gap-8",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 md:w-1/2",children:[t.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:o?"Edit Building Information":"Add Building Information"}),t.jsxs("form",{onSubmit:g,className:"space-y-4",encType:"multipart/form-data",children:[t.jsx("input",{type:"text",placeholder:"Name",value:n.name,onChange:x,name:"name",required:!0,className:"w-full border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"}),t.jsx("textarea",{name:"information",value:n.information,onChange:x,placeholder:"Information",rows:"3",className:"w-full border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{type:"submit",disabled:c,className:"bg-blue-600 text-white px-6 py-2 rounded-lg text-sm font-medium shadow-md disabled:opacity-50",children:c?"Saving...":o?"Update Information":"Add Information"}),o&&t.jsx("button",{type:"button",onClick:w,className:"bg-gray-300 text-gray-800 px-6 py-2 rounded-lg text-sm font-medium shadow-md",children:"Cancel"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 md:w-1/2",children:[t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Building Info Posts"}),i.length===0?t.jsx("p",{className:"text-gray-500 text-sm",children:"No posts found."}):t.jsx("div",{className:"space-y-6 overflow-y-auto max-h-[75vh] pr-2",children:i.map(e=>t.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 relative",children:[t.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[t.jsx("button",{onClick:()=>b(e),className:"text-sm text-blue-600 hover:text-blue-800",children:"âœï¸"}),t.jsx("button",{onClick:()=>y(e.id),className:"text-sm text-red-500 hover:text-red-700",children:"ğŸ—‘ï¸"})]}),t.jsx("h4",{className:"font-semibold text-lg text-gray-800",children:e.name}),t.jsx("p",{className:"text-gray-600 text-sm mt-1",children:e.information})]},e.id))})]})]})})]})}export{k as default};
