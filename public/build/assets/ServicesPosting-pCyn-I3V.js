import{r,a as d,j as s}from"./app-Cqxp1_7P.js";import{I as j}from"./IT-B7j6Kk7D.js";import"./ApplicationLogo-C1dQPKCw.js";import"./Dropdown-a4BINxxd.js";import"./transition-C33CftHd.js";import"./NavLink-DEYwgt1Y.js";function I(){const[l,i]=r.useState([]),[t,o]=r.useState(null),[m,x]=r.useState(!1),[n,c]=r.useState({services:""});r.useEffect(()=>{d.get("/services/json").then(e=>i(e.data.services||[])).catch(e=>console.error("Failed to fetch services",e))},[]);const h=e=>{c({...n,[e.target.name]:e.target.value})},g=async()=>{const e=await d.post("/services",n);i([e.data,...l])},p=async()=>{const e=await d.post(`/services/${t}`,{...n,_method:"PUT"});i(a=>a.map(u=>u.id===t?e.data:u))},b=async e=>{e.preventDefault(),x(!0);try{t?await p():await g(),c({services:""}),o(null)}catch{alert("Something went wrong")}finally{x(!1)}},v=e=>{c({services:e.services}),o(e.id)},f=async e=>{if(confirm("Delete this service?"))try{await d.delete(`/services/${e}`),i(l.filter(a=>a.id!==e))}catch{alert("Failed to delete.")}},y=()=>{o(null),c({services:""})};return s.jsx(j,{children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-3xl font-semibold text-gray-800 text-center mb-10",children:"ðŸ›  School Services"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:t?"Edit Service":"Add New Service"}),s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsx("input",{type:"text",placeholder:"Enter service name",name:"services",value:n.services,onChange:h,required:!0,className:"w-full bg-gray-50 border border-gray-300 rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"submit",disabled:m,className:"bg-blue-600 text-white px-6 py-2 rounded-xl text-sm font-medium shadow-sm disabled:opacity-50",children:m?"Saving...":t?"Update":"Add"}),t&&s.jsx("button",{type:"button",className:"bg-gray-200 text-gray-700 px-6 py-2 rounded-xl text-sm font-medium shadow-sm",onClick:y,children:"Cancel"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 border border-gray-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Existing Services"}),s.jsx("div",{className:"space-y-3",children:l.map(e=>s.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-xl flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-gray-700",children:e.services}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>v(e),className:"text-blue-600 font-medium text-sm",children:"Edit"}),s.jsx("button",{onClick:()=>f(e.id),className:"text-red-600 font-medium text-sm",children:"Delete"})]})]},e.id))})]})]})]})})}export{I as default};
